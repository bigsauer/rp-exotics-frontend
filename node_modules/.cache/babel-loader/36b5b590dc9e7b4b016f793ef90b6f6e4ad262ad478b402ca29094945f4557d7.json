{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Car,ArrowLeft,Save,Send,AlertCircle,CheckCircle,Loader2,Calendar,DollarSign,FileText,User,MapPin,Phone,Mail,Hash,Palette,Key,Gauge,Info,Shield,Clock,Plus,X,Home}from'lucide-react';import ApiService from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewDealEntry=()=>{var _steps;const navigate=useNavigate();const[currentUser]=useState({name:'Chris Murphy',role:'admin',permissions:{canCreateDeals:true,canViewFinancials:true,canManageDealers:true}});const[formData,setFormData]=useState({// Vehicle Information\nvin:'',year:'',make:'',model:'',mileage:'',exteriorColor:'',interiorColor:'',numberOfKeys:'',// Deal Information\ndealType:'',fundingSource:'',purchaseDate:'',paymentMethod:'',currentStage:'initial-contact',// Financial Information\npurchasePrice:'',listPrice:'',killPrice:'',wholesalePrice:'',commissionRate:'',brokerageFee:'',brokeerageFeePaidTo:'',payoffBalance:'',amountDueToCustomer:'',amountDueToRP:'',// Seller Information\nsellerName:'',sellerCompany:'',sellerAddress:'',sellerPhone:'',sellerEmail:'',// RP Information\nrpStockNumber:'',vehicleDescription:'',generalNotes:'',// Documentation\ncontractRequired:false,titlePresent:false,driverLicensePresent:false,odometerPresent:false,dealerLicensePresent:false});const[vinDecoding,setVinDecoding]=useState(false);const[vinDecoded,setVinDecoded]=useState(false);const[dealerSuggestions,setDealerSuggestions]=useState([]);const[formErrors,setFormErrors]=useState({});const[saving,setSaving]=useState(false);const[currentStep,setCurrentStep]=useState(1);const dealTypes=[{value:'wholesale-d2d',label:'Wholesale - D2D'},{value:'wholesale-private',label:'Wholesale - Private Party'},{value:'wholesale-flip',label:'Wholesale - Flip'},{value:'retail-pp',label:'Retail - PP'},{value:'retail-auction',label:'Retail - Auction'},{value:'retail-dtod',label:'Retail - DtoD'},{value:'auction',label:'Auction'}];const fundingSources=[{value:'flpn-retail',label:'FLPN - Retail'},{value:'flpn-wholesale',label:'FLPN - Wholesale'},{value:'cash',label:'Cash'},{value:'flooring-line',label:'Flooring Line'},{value:'consignment',label:'Consignment'}];const paymentMethods=[{value:'check',label:'Check'},{value:'wire',label:'Wire Transfer'},{value:'ach',label:'ACH'},{value:'cash',label:'Cash'},{value:'financed',label:'Financed'}];const dealStages=[{value:'initial-contact',label:'Initial Contact'},{value:'price-negotiated',label:'Price Negotiated'},{value:'inspection-scheduled',label:'Inspection Scheduled'},{value:'inspection-complete',label:'Inspection Complete'},{value:'purchased',label:'Purchased'},{value:'title-processing',label:'Title Processing'},{value:'title-received',label:'Title Received'},{value:'ready-to-list',label:'Ready to List'},{value:'listed',label:'Listed'},{value:'sold',label:'Sold'},{value:'delivered',label:'Delivered'}];// Real VIN decode function using API\nconst decodeVIN=async vin=>{setVinDecoding(true);try{const response=await ApiService.decodeVIN(vin);setFormData(prev=>({...prev,year:response.data.year||prev.year,make:response.data.make||prev.make,model:response.data.model||prev.model}));setVinDecoded(true);setTimeout(()=>setVinDecoded(false),3000);}catch(error){console.error('VIN decode error:',error);alert('VIN decode failed. Please enter details manually.');}finally{setVinDecoding(false);}};// Real dealer search using API\nconst searchDealers=async query=>{if(query.length<2){setDealerSuggestions([]);return;}try{const response=await ApiService.searchDealers(query);setDealerSuggestions(response.dealers||[]);}catch(error){console.error('Dealer search failed:',error);setDealerSuggestions([]);}};// Auto-generate stock number\nuseEffect(()=>{if(!formData.rpStockNumber&&formData.year&&formData.make){const year=new Date().getFullYear();const stockNumber=`RP${year}${String(Math.floor(Math.random()*9999)+1).padStart(4,'0')}`;setFormData(prev=>({...prev,rpStockNumber:stockNumber}));}},[formData.year,formData.make,formData.rpStockNumber]);const handleInputChange=(field,value)=>{setFormData(prev=>({...prev,[field]:value}));// Clear error when user starts typing\nif(formErrors[field]){setFormErrors(prev=>({...prev,[field]:null}));}// Trigger VIN decode when VIN is 17 characters\nif(field==='vin'&&value.length===17&&!vinDecoded){decodeVIN(value);}// Search dealers when typing in seller field\nif(field==='sellerName'){searchDealers(value);}};const validateForm=()=>{const errors={};if(!formData.vin||formData.vin.length!==17){errors.vin='Valid VIN (17 characters) required';}if(!formData.dealType)errors.dealType='Deal type required';if(!formData.year)errors.year='Year required';if(!formData.make)errors.make='Make required';if(!formData.model)errors.model='Model required';if(!formData.purchasePrice&&currentUser.permissions.canViewFinancials){errors.purchasePrice='Purchase price required';}setFormErrors(errors);return Object.keys(errors).length===0;};const handleSave=async function(){let isDraft=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!isDraft&&!validateForm()){return;}setSaving(true);try{const response=await ApiService.createDeal({...formData,isDraft});console.log('Deal saved:',response);// Show success message or redirect\nalert(isDraft?'Draft saved successfully!':'Deal created successfully!');if(!isDraft){// Redirect to deals list or reset form\n// window.location.href = '/deals';\n}}catch(error){console.error('Save error:',error);alert(`Error saving deal: ${error.message}`);}finally{setSaving(false);}};const handleEmailToListingTeam=()=>{const emailBody=`New Vehicle Ready for Listing\n\nVehicle: ${formData.year} ${formData.make} ${formData.model}\nVIN: ${formData.vin}\nStock #: ${formData.rpStockNumber}\nMileage: ${formData.mileage}\nExterior: ${formData.exteriorColor}\nInterior: ${formData.interiorColor}\n\nDescription:\n${formData.vehicleDescription}\n\nPlease prepare listing materials for this vehicle.\n\nBest regards,\n${currentUser.name}`;const mailtoLink=`mailto:listing@rpexotics.com?subject=New Vehicle for Listing - ${formData.year} ${formData.make} ${formData.model}&body=${encodeURIComponent(emailBody)}`;window.open(mailtoLink);};const steps=[{id:1,title:'Vehicle Info',icon:Car},{id:2,title:'Deal Details',icon:FileText},{id:3,title:'Financial',icon:DollarSign},{id:4,title:'Seller Info',icon:User},{id:5,title:'Documentation',icon:Shield}];const renderStepIndicator=()=>/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center space-x-4 mb-8\",children:steps.map((step,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-300 cursor-pointer ${currentStep>=step.id?'bg-blue-500 border-blue-500 text-white':'border-gray-600 text-gray-400 hover:border-gray-500'}`,onClick:()=>setCurrentStep(step.id),children:/*#__PURE__*/_jsx(step.icon,{className:\"h-5 w-5\"})}),index<steps.length-1&&/*#__PURE__*/_jsx(\"div\",{className:`w-12 h-0.5 mx-2 transition-all duration-300 ${currentStep>step.id?'bg-blue-500':'bg-gray-600'}`})]},step.id))});const renderFormField=function(label,field){let type=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'text';let options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;let required=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;let icon=arguments.length>5&&arguments[5]!==undefined?arguments[5]:null;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center text-sm font-medium text-gray-300\",children:[icon&&/*#__PURE__*/_jsx(\"icon\",{className:\"h-4 w-4 mr-2\"}),label,required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-400 ml-1\",children:\"*\"})]}),type==='select'?/*#__PURE__*/_jsxs(\"select\",{value:formData[field],onChange:e=>handleInputChange(field,e.target.value),className:`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${formErrors[field]?'border-red-500':'border-white/20 hover:border-white/30'}`,children:[/*#__PURE__*/_jsxs(\"option\",{value:\"\",children:[\"Select \",label]}),options===null||options===void 0?void 0:options.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,className:\"bg-gray-800\",children:option.label},option.value))]}):type==='textarea'?/*#__PURE__*/_jsx(\"textarea\",{value:formData[field],onChange:e=>handleInputChange(field,e.target.value),rows:4,placeholder:`Enter ${label.toLowerCase()}...`,className:`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors resize-none ${formErrors[field]?'border-red-500':'border-white/20 hover:border-white/30'}`}):type==='checkbox'?/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData[field],onChange:e=>handleInputChange(field,e.target.checked),className:\"rounded bg-white/10 border-white/20 text-blue-500 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300\",children:label})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:type,value:formData[field],onChange:e=>handleInputChange(field,e.target.value),placeholder:`Enter ${label.toLowerCase()}...`,className:`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${formErrors[field]?'border-red-500':'border-white/20 hover:border-white/30'} ${field==='vin'?'pr-20':''}`}),field==='vin'&&formData.vin.length===17&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-2 top-1/2 transform -translate-y-1/2\",children:vinDecoding?/*#__PURE__*/_jsx(Loader2,{className:\"h-5 w-5 text-blue-400 animate-spin\"}):vinDecoded?/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-green-400\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>decodeVIN(formData.vin),className:\"bg-blue-500 hover:bg-blue-600 text-white text-xs px-2 py-1 rounded transition-colors\",children:\"Decode\"})}),field==='sellerName'&&dealerSuggestions.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\",children:dealerSuggestions.map(dealer=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\",onClick:()=>{setFormData(prev=>({...prev,sellerName:dealer.name,sellerCompany:dealer.company,sellerPhone:dealer.phone}));setDealerSuggestions([]);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-white\",children:dealer.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-400\",children:[dealer.company,\" \\u2022 \",dealer.location]})]},dealer.id))})]}),formErrors[field]&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-red-400 text-sm\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-4 w-4 mr-1\"}),formErrors[field]]})]});};const renderStep=()=>{switch(currentStep){case 1:return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:renderFormField('VIN','vin','text',null,true,Hash)}),renderFormField('Deal Type','dealType','select',dealTypes,true,Car),renderFormField('Year','year','number',null,true,Calendar),renderFormField('Make','make','text',null,true),renderFormField('Model','model','text',null,true),renderFormField('Mileage','mileage','number',null,false,Gauge),renderFormField('Exterior Color','exteriorColor','text',null,false,Palette),renderFormField('Interior Color','interiorColor','text',null,false,Palette),renderFormField('Number of Keys','numberOfKeys','number',null,false,Key)]});case 2:return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[renderFormField('Funding Source','fundingSource','select',fundingSources,true,DollarSign),renderFormField('Purchase/Sale Date','purchaseDate','date',null,true,Calendar),renderFormField('Payment Method','paymentMethod','select',paymentMethods,true),renderFormField('Current Deal Stage','currentStage','select',dealStages,true,Clock),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:renderFormField('RP Stock Number','rpStockNumber','text',null,false,Hash)})]});case 3:return currentUser.permissions.canViewFinancials?/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[renderFormField('Purchase Price','purchasePrice','number',null,true,DollarSign),renderFormField('List Price','listPrice','number'),renderFormField('Kill Price','killPrice','number'),renderFormField('Wholesale Price','wholesalePrice','number'),renderFormField('Commission Rate (%)','commissionRate','number'),renderFormField('Brokerage Fee','brokerageFee','number'),renderFormField('Payoff Balance','payoffBalance','number'),renderFormField('Amount Due to Customer','amountDueToCustomer','number'),renderFormField('Amount Due to RP','amountDueToRP','number'),renderFormField('Brokerage Fee Paid To','brokeerageFeePaidTo','text')]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(Shield,{className:\"h-12 w-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-white mb-2\",children:\"Financial Information Restricted\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400\",children:\"You don't have permission to view or edit financial details.\"})]});case 4:return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:renderFormField('Purchased From','sellerName','text',null,true,User)}),renderFormField('Company/Dealer','sellerCompany','text'),renderFormField('Phone','sellerPhone','tel',null,false,Phone),renderFormField('Email','sellerEmail','email',null,false,Mail),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:renderFormField('Address','sellerAddress','text',null,false,MapPin)})]});case 5:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-white mb-4\",children:\"Documentation Status\"}),renderFormField('Contract Required','contractRequired','checkbox'),renderFormField('Title Present','titlePresent','checkbox'),renderFormField('Driver License Present','driverLicensePresent','checkbox'),renderFormField('Odometer Present','odometerPresent','checkbox'),renderFormField('Dealer License Present','dealerLicensePresent','checkbox')]}),/*#__PURE__*/_jsx(\"div\",{children:renderFormField('Vehicle Description','vehicleDescription','textarea',null,false,FileText)})]}),/*#__PURE__*/_jsx(\"div\",{children:renderFormField('General Notes','generalNotes','textarea',null,false,Info)})]});default:return null;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 overflow-hidden pointer-events-none\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000\"})]}),/*#__PURE__*/_jsx(\"header\",{className:\"relative bg-black/20 backdrop-blur-md border-b border-white/10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"mr-4 p-2 bg-white/10 hover:bg-white/20 rounded-lg border border-white/20 transition-colors\",title:\"Back to Dashboard\",children:/*#__PURE__*/_jsx(Home,{className:\"h-5 w-5 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-3 mr-4 shadow-lg shadow-blue-500/25\",children:/*#__PURE__*/_jsx(Plus,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-white\",children:\"New Deal Entry\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 text-sm\",children:\"Create a new vehicle deal\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleSave(true),disabled:saving,className:\"flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-colors disabled:opacity-50\",children:[saving?/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 mr-2 animate-spin\"}):/*#__PURE__*/_jsx(Save,{className:\"h-4 w-4 mr-2\"}),\"Save Draft\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleSave(false),disabled:saving,className:\"flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg shadow-lg transition-colors disabled:opacity-50\",children:[saving?/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 mr-2 animate-spin\"}):/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 mr-2\"}),\"Create Deal\"]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative max-w-6xl mx-auto px-6 py-8\",children:[renderStepIndicator(),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-2\",children:(_steps=steps[currentStep-1])===null||_steps===void 0?void 0:_steps.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-300\",children:[currentStep===1&&'Enter basic vehicle information and VIN details',currentStep===2&&'Configure deal type, funding, and timeline',currentStep===3&&'Set pricing and financial terms',currentStep===4&&'Add seller contact information',currentStep===5&&'Document status and additional notes']})]}),renderStep(),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-8 pt-6 border-t border-white/10\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentStep(Math.max(1,currentStep-1)),disabled:currentStep===1,className:\"flex items-center px-4 py-2 text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-4 w-4 mr-2\"}),\"Previous\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[currentStep===5&&formData.vehicleDescription&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleEmailToListingTeam,className:\"flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(Send,{className:\"h-4 w-4 mr-2\"}),\"Email to Listing Team\"]}),currentStep<5?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentStep(Math.min(5,currentStep+1)),className:\"flex items-center px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg transition-colors\",children:[\"Next\",/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-4 w-4 ml-2 rotate-180\"})]}):/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleSave(false),disabled:saving,className:\"flex items-center px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg transition-colors disabled:opacity-50\",children:[saving?/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 mr-2 animate-spin\"}):/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 mr-2\"}),\"Complete Deal\"]})]})]})]}),vinDecoding&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-6 right-6 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 mr-2 animate-spin\"}),\"Decoding VIN...\"]}),vinDecoded&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed bottom-6 right-6 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 mr-2\"}),\"VIN decoded successfully!\"]})]})]});};export default NewDealEntry;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Car","ArrowLeft","Save","Send","AlertCircle","CheckCircle","Loader2","Calendar","DollarSign","FileText","User","MapPin","Phone","Mail","Hash","Palette","Key","Gauge","Info","Shield","Clock","Plus","X","Home","ApiService","jsx","_jsx","jsxs","_jsxs","NewDealEntry","_steps","navigate","currentUser","name","role","permissions","canCreateDeals","canViewFinancials","canManageDealers","formData","setFormData","vin","year","make","model","mileage","exteriorColor","interiorColor","numberOfKeys","dealType","fundingSource","purchaseDate","paymentMethod","currentStage","purchasePrice","listPrice","killPrice","wholesalePrice","commissionRate","brokerageFee","brokeerageFeePaidTo","payoffBalance","amountDueToCustomer","amountDueToRP","sellerName","sellerCompany","sellerAddress","sellerPhone","sellerEmail","rpStockNumber","vehicleDescription","generalNotes","contractRequired","titlePresent","driverLicensePresent","odometerPresent","dealerLicensePresent","vinDecoding","setVinDecoding","vinDecoded","setVinDecoded","dealerSuggestions","setDealerSuggestions","formErrors","setFormErrors","saving","setSaving","currentStep","setCurrentStep","dealTypes","value","label","fundingSources","paymentMethods","dealStages","decodeVIN","response","prev","data","setTimeout","error","console","alert","searchDealers","query","length","dealers","Date","getFullYear","stockNumber","String","Math","floor","random","padStart","handleInputChange","field","validateForm","errors","Object","keys","handleSave","isDraft","arguments","undefined","createDeal","log","message","handleEmailToListingTeam","emailBody","mailtoLink","encodeURIComponent","window","open","steps","id","title","icon","renderStepIndicator","className","children","map","step","index","onClick","renderFormField","type","options","required","onChange","e","target","option","rows","placeholder","toLowerCase","checked","dealer","company","phone","location","renderStep","disabled","max","min"],"sources":["/Users/bsauer02/Desktop/Opis3.0/rp-exotics-frontend-only/src/components/NewDealEntry.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { \n  Car, ArrowLeft, Save, Send, AlertCircle, CheckCircle, Loader2, \n  Calendar, DollarSign, FileText, User, \n  MapPin, Phone, Mail, Hash, Palette, Key, Gauge, \n  Info, Shield, Clock, Plus, X, Home\n} from 'lucide-react';\nimport ApiService from '../services/api';\n\nconst NewDealEntry = () => {\n  const navigate = useNavigate();\n  \n  const [currentUser] = useState({\n    name: 'Chris Murphy',\n    role: 'admin',\n    permissions: {\n      canCreateDeals: true,\n      canViewFinancials: true,\n      canManageDealers: true\n    }\n  });\n\n  const [formData, setFormData] = useState({\n    // Vehicle Information\n    vin: '',\n    year: '',\n    make: '',\n    model: '',\n    mileage: '',\n    exteriorColor: '',\n    interiorColor: '',\n    numberOfKeys: '',\n    \n    // Deal Information\n    dealType: '',\n    fundingSource: '',\n    purchaseDate: '',\n    paymentMethod: '',\n    currentStage: 'initial-contact',\n    \n    // Financial Information\n    purchasePrice: '',\n    listPrice: '',\n    killPrice: '',\n    wholesalePrice: '',\n    commissionRate: '',\n    brokerageFee: '',\n    brokeerageFeePaidTo: '',\n    payoffBalance: '',\n    amountDueToCustomer: '',\n    amountDueToRP: '',\n    \n    // Seller Information\n    sellerName: '',\n    sellerCompany: '',\n    sellerAddress: '',\n    sellerPhone: '',\n    sellerEmail: '',\n    \n    // RP Information\n    rpStockNumber: '',\n    vehicleDescription: '',\n    generalNotes: '',\n    \n    // Documentation\n    contractRequired: false,\n    titlePresent: false,\n    driverLicensePresent: false,\n    odometerPresent: false,\n    dealerLicensePresent: false\n  });\n\n  const [vinDecoding, setVinDecoding] = useState(false);\n  const [vinDecoded, setVinDecoded] = useState(false);\n  const [dealerSuggestions, setDealerSuggestions] = useState([]);\n  const [formErrors, setFormErrors] = useState({});\n  const [saving, setSaving] = useState(false);\n  const [currentStep, setCurrentStep] = useState(1);\n\n  const dealTypes = [\n    { value: 'wholesale-d2d', label: 'Wholesale - D2D' },\n    { value: 'wholesale-private', label: 'Wholesale - Private Party' },\n    { value: 'wholesale-flip', label: 'Wholesale - Flip' },\n    { value: 'retail-pp', label: 'Retail - PP' },\n    { value: 'retail-auction', label: 'Retail - Auction' },\n    { value: 'retail-dtod', label: 'Retail - DtoD' },\n    { value: 'auction', label: 'Auction' }\n  ];\n\n  const fundingSources = [\n    { value: 'flpn-retail', label: 'FLPN - Retail' },\n    { value: 'flpn-wholesale', label: 'FLPN - Wholesale' },\n    { value: 'cash', label: 'Cash' },\n    { value: 'flooring-line', label: 'Flooring Line' },\n    { value: 'consignment', label: 'Consignment' }\n  ];\n\n  const paymentMethods = [\n    { value: 'check', label: 'Check' },\n    { value: 'wire', label: 'Wire Transfer' },\n    { value: 'ach', label: 'ACH' },\n    { value: 'cash', label: 'Cash' },\n    { value: 'financed', label: 'Financed' }\n  ];\n\n  const dealStages = [\n    { value: 'initial-contact', label: 'Initial Contact' },\n    { value: 'price-negotiated', label: 'Price Negotiated' },\n    { value: 'inspection-scheduled', label: 'Inspection Scheduled' },\n    { value: 'inspection-complete', label: 'Inspection Complete' },\n    { value: 'purchased', label: 'Purchased' },\n    { value: 'title-processing', label: 'Title Processing' },\n    { value: 'title-received', label: 'Title Received' },\n    { value: 'ready-to-list', label: 'Ready to List' },\n    { value: 'listed', label: 'Listed' },\n    { value: 'sold', label: 'Sold' },\n    { value: 'delivered', label: 'Delivered' }\n  ];\n\n  // Real VIN decode function using API\n  const decodeVIN = async (vin) => {\n    setVinDecoding(true);\n    try {\n      const response = await ApiService.decodeVIN(vin);\n      \n      setFormData(prev => ({\n        ...prev,\n        year: response.data.year || prev.year,\n        make: response.data.make || prev.make,\n        model: response.data.model || prev.model\n      }));\n      \n      setVinDecoded(true);\n      setTimeout(() => setVinDecoded(false), 3000);\n    } catch (error) {\n      console.error('VIN decode error:', error);\n      alert('VIN decode failed. Please enter details manually.');\n    } finally {\n      setVinDecoding(false);\n    }\n  };\n\n  // Real dealer search using API\n  const searchDealers = async (query) => {\n    if (query.length < 2) {\n      setDealerSuggestions([]);\n      return;\n    }\n    \n    try {\n      const response = await ApiService.searchDealers(query);\n      setDealerSuggestions(response.dealers || []);\n    } catch (error) {\n      console.error('Dealer search failed:', error);\n      setDealerSuggestions([]);\n    }\n  };\n\n  // Auto-generate stock number\n  useEffect(() => {\n    if (!formData.rpStockNumber && formData.year && formData.make) {\n      const year = new Date().getFullYear();\n      const stockNumber = `RP${year}${String(Math.floor(Math.random() * 9999) + 1).padStart(4, '0')}`;\n      setFormData(prev => ({ ...prev, rpStockNumber: stockNumber }));\n    }\n  }, [formData.year, formData.make, formData.rpStockNumber]);\n\n  const handleInputChange = (field, value) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    \n    // Clear error when user starts typing\n    if (formErrors[field]) {\n      setFormErrors(prev => ({ ...prev, [field]: null }));\n    }\n    \n    // Trigger VIN decode when VIN is 17 characters\n    if (field === 'vin' && value.length === 17 && !vinDecoded) {\n      decodeVIN(value);\n    }\n    \n    // Search dealers when typing in seller field\n    if (field === 'sellerName') {\n      searchDealers(value);\n    }\n  };\n\n  const validateForm = () => {\n    const errors = {};\n    \n    if (!formData.vin || formData.vin.length !== 17) {\n      errors.vin = 'Valid VIN (17 characters) required';\n    }\n    if (!formData.dealType) errors.dealType = 'Deal type required';\n    if (!formData.year) errors.year = 'Year required';\n    if (!formData.make) errors.make = 'Make required';\n    if (!formData.model) errors.model = 'Model required';\n    if (!formData.purchasePrice && currentUser.permissions.canViewFinancials) {\n      errors.purchasePrice = 'Purchase price required';\n    }\n    \n    setFormErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSave = async (isDraft = false) => {\n    if (!isDraft && !validateForm()) {\n      return;\n    }\n    \n    setSaving(true);\n    \n    try {\n      const response = await ApiService.createDeal({\n        ...formData,\n        isDraft\n      });\n      \n      console.log('Deal saved:', response);\n      \n      // Show success message or redirect\n      alert(isDraft ? 'Draft saved successfully!' : 'Deal created successfully!');\n      \n      if (!isDraft) {\n        // Redirect to deals list or reset form\n        // window.location.href = '/deals';\n      }\n      \n    } catch (error) {\n      console.error('Save error:', error);\n      alert(`Error saving deal: ${error.message}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleEmailToListingTeam = () => {\n    const emailBody = `New Vehicle Ready for Listing\n\nVehicle: ${formData.year} ${formData.make} ${formData.model}\nVIN: ${formData.vin}\nStock #: ${formData.rpStockNumber}\nMileage: ${formData.mileage}\nExterior: ${formData.exteriorColor}\nInterior: ${formData.interiorColor}\n\nDescription:\n${formData.vehicleDescription}\n\nPlease prepare listing materials for this vehicle.\n\nBest regards,\n${currentUser.name}`;\n\n    const mailtoLink = `mailto:listing@rpexotics.com?subject=New Vehicle for Listing - ${formData.year} ${formData.make} ${formData.model}&body=${encodeURIComponent(emailBody)}`;\n    window.open(mailtoLink);\n  };\n\n  const steps = [\n    { id: 1, title: 'Vehicle Info', icon: Car },\n    { id: 2, title: 'Deal Details', icon: FileText },\n    { id: 3, title: 'Financial', icon: DollarSign },\n    { id: 4, title: 'Seller Info', icon: User },\n    { id: 5, title: 'Documentation', icon: Shield }\n  ];\n\n  const renderStepIndicator = () => (\n    <div className=\"flex items-center justify-center space-x-4 mb-8\">\n      {steps.map((step, index) => (\n        <div key={step.id} className=\"flex items-center\">\n          <div\n            className={`flex items-center justify-center w-10 h-10 rounded-full border-2 transition-all duration-300 cursor-pointer ${\n              currentStep >= step.id\n                ? 'bg-blue-500 border-blue-500 text-white'\n                : 'border-gray-600 text-gray-400 hover:border-gray-500'\n            }`}\n            onClick={() => setCurrentStep(step.id)}\n          >\n            <step.icon className=\"h-5 w-5\" />\n          </div>\n          {index < steps.length - 1 && (\n            <div\n              className={`w-12 h-0.5 mx-2 transition-all duration-300 ${\n                currentStep > step.id ? 'bg-blue-500' : 'bg-gray-600'\n              }`}\n            />\n          )}\n        </div>\n      ))}\n    </div>\n  );\n\n  const renderFormField = (label, field, type = 'text', options = null, required = false, icon = null) => (\n    <div className=\"space-y-2\">\n      <label className=\"flex items-center text-sm font-medium text-gray-300\">\n        {icon && <icon className=\"h-4 w-4 mr-2\" />}\n        {label}\n        {required && <span className=\"text-red-400 ml-1\">*</span>}\n      </label>\n      \n      {type === 'select' ? (\n        <select\n          value={formData[field]}\n          onChange={(e) => handleInputChange(field, e.target.value)}\n          className={`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\n            formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'\n          }`}\n        >\n          <option value=\"\">Select {label}</option>\n          {options?.map(option => (\n            <option key={option.value} value={option.value} className=\"bg-gray-800\">\n              {option.label}\n            </option>\n          ))}\n        </select>\n      ) : type === 'textarea' ? (\n        <textarea\n          value={formData[field]}\n          onChange={(e) => handleInputChange(field, e.target.value)}\n          rows={4}\n          placeholder={`Enter ${label.toLowerCase()}...`}\n          className={`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors resize-none ${\n            formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'\n          }`}\n        />\n      ) : type === 'checkbox' ? (\n        <label className=\"flex items-center space-x-2 cursor-pointer\">\n          <input\n            type=\"checkbox\"\n            checked={formData[field]}\n            onChange={(e) => handleInputChange(field, e.target.checked)}\n            className=\"rounded bg-white/10 border-white/20 text-blue-500 focus:ring-blue-500\"\n          />\n          <span className=\"text-gray-300\">{label}</span>\n        </label>\n      ) : (\n        <div className=\"relative\">\n          <input\n            type={type}\n            value={formData[field]}\n            onChange={(e) => handleInputChange(field, e.target.value)}\n            placeholder={`Enter ${label.toLowerCase()}...`}\n            className={`w-full bg-white/10 border rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\n              formErrors[field] ? 'border-red-500' : 'border-white/20 hover:border-white/30'\n            } ${field === 'vin' ? 'pr-20' : ''}`}\n          />\n          \n          {field === 'vin' && formData.vin.length === 17 && (\n            <div className=\"absolute right-2 top-1/2 transform -translate-y-1/2\">\n              {vinDecoding ? (\n                <Loader2 className=\"h-5 w-5 text-blue-400 animate-spin\" />\n              ) : vinDecoded ? (\n                <CheckCircle className=\"h-5 w-5 text-green-400\" />\n              ) : (\n                <button\n                  onClick={() => decodeVIN(formData.vin)}\n                  className=\"bg-blue-500 hover:bg-blue-600 text-white text-xs px-2 py-1 rounded transition-colors\"\n                >\n                  Decode\n                </button>\n              )}\n            </div>\n          )}\n          \n          {field === 'sellerName' && dealerSuggestions.length > 0 && (\n            <div className=\"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-white/20 rounded-lg shadow-xl z-10 max-h-40 overflow-y-auto\">\n              {dealerSuggestions.map(dealer => (\n                <div\n                  key={dealer.id}\n                  className=\"p-3 hover:bg-white/10 cursor-pointer border-b border-white/10 last:border-b-0\"\n                  onClick={() => {\n                    setFormData(prev => ({\n                      ...prev,\n                      sellerName: dealer.name,\n                      sellerCompany: dealer.company,\n                      sellerPhone: dealer.phone\n                    }));\n                    setDealerSuggestions([]);\n                  }}\n                >\n                  <div className=\"font-medium text-white\">{dealer.name}</div>\n                  <div className=\"text-sm text-gray-400\">{dealer.company} â€¢ {dealer.location}</div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n      \n      {formErrors[field] && (\n        <div className=\"flex items-center text-red-400 text-sm\">\n          <AlertCircle className=\"h-4 w-4 mr-1\" />\n          {formErrors[field]}\n        </div>\n      )}\n    </div>\n  );\n\n  const renderStep = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"md:col-span-2\">\n              {renderFormField('VIN', 'vin', 'text', null, true, Hash)}\n            </div>\n            {renderFormField('Deal Type', 'dealType', 'select', dealTypes, true, Car)}\n            {renderFormField('Year', 'year', 'number', null, true, Calendar)}\n            {renderFormField('Make', 'make', 'text', null, true)}\n            {renderFormField('Model', 'model', 'text', null, true)}\n            {renderFormField('Mileage', 'mileage', 'number', null, false, Gauge)}\n            {renderFormField('Exterior Color', 'exteriorColor', 'text', null, false, Palette)}\n            {renderFormField('Interior Color', 'interiorColor', 'text', null, false, Palette)}\n            {renderFormField('Number of Keys', 'numberOfKeys', 'number', null, false, Key)}\n          </div>\n        );\n      \n      case 2:\n        return (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {renderFormField('Funding Source', 'fundingSource', 'select', fundingSources, true, DollarSign)}\n            {renderFormField('Purchase/Sale Date', 'purchaseDate', 'date', null, true, Calendar)}\n            {renderFormField('Payment Method', 'paymentMethod', 'select', paymentMethods, true)}\n            {renderFormField('Current Deal Stage', 'currentStage', 'select', dealStages, true, Clock)}\n            <div className=\"md:col-span-2\">\n              {renderFormField('RP Stock Number', 'rpStockNumber', 'text', null, false, Hash)}\n            </div>\n          </div>\n        );\n      \n      case 3:\n        return currentUser.permissions.canViewFinancials ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {renderFormField('Purchase Price', 'purchasePrice', 'number', null, true, DollarSign)}\n            {renderFormField('List Price', 'listPrice', 'number')}\n            {renderFormField('Kill Price', 'killPrice', 'number')}\n            {renderFormField('Wholesale Price', 'wholesalePrice', 'number')}\n            {renderFormField('Commission Rate (%)', 'commissionRate', 'number')}\n            {renderFormField('Brokerage Fee', 'brokerageFee', 'number')}\n            {renderFormField('Payoff Balance', 'payoffBalance', 'number')}\n            {renderFormField('Amount Due to Customer', 'amountDueToCustomer', 'number')}\n            {renderFormField('Amount Due to RP', 'amountDueToRP', 'number')}\n            {renderFormField('Brokerage Fee Paid To', 'brokeerageFeePaidTo', 'text')}\n          </div>\n        ) : (\n          <div className=\"text-center py-12\">\n            <Shield className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-white mb-2\">Financial Information Restricted</h3>\n            <p className=\"text-gray-400\">You don't have permission to view or edit financial details.</p>\n          </div>\n        );\n      \n      case 4:\n        return (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"md:col-span-2\">\n              {renderFormField('Purchased From', 'sellerName', 'text', null, true, User)}\n            </div>\n            {renderFormField('Company/Dealer', 'sellerCompany', 'text')}\n            {renderFormField('Phone', 'sellerPhone', 'tel', null, false, Phone)}\n            {renderFormField('Email', 'sellerEmail', 'email', null, false, Mail)}\n            <div className=\"md:col-span-2\">\n              {renderFormField('Address', 'sellerAddress', 'text', null, false, MapPin)}\n            </div>\n          </div>\n        );\n      \n      case 5:\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-4\">\n                <h3 className=\"text-lg font-medium text-white mb-4\">Documentation Status</h3>\n                {renderFormField('Contract Required', 'contractRequired', 'checkbox')}\n                {renderFormField('Title Present', 'titlePresent', 'checkbox')}\n                {renderFormField('Driver License Present', 'driverLicensePresent', 'checkbox')}\n                {renderFormField('Odometer Present', 'odometerPresent', 'checkbox')}\n                {renderFormField('Dealer License Present', 'dealerLicensePresent', 'checkbox')}\n              </div>\n              <div>\n                {renderFormField('Vehicle Description', 'vehicleDescription', 'textarea', null, false, FileText)}\n              </div>\n            </div>\n            <div>\n              {renderFormField('General Notes', 'generalNotes', 'textarea', null, false, Info)}\n            </div>\n          </div>\n        );\n      \n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black\">\n      {/* Animated Background */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n      </div>\n\n      {/* Header */}\n      <header className=\"relative bg-black/20 backdrop-blur-md border-b border-white/10\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <button \n                onClick={() => navigate('/')}\n                className=\"mr-4 p-2 bg-white/10 hover:bg-white/20 rounded-lg border border-white/20 transition-colors\"\n                title=\"Back to Dashboard\"\n              >\n                <Home className=\"h-5 w-5 text-white\" />\n              </button>\n              <div className=\"flex items-center\">\n                <div className=\"bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl p-3 mr-4 shadow-lg shadow-blue-500/25\">\n                  <Plus className=\"h-6 w-6 text-white\" />\n                </div>\n                <div>\n                  <h1 className=\"text-xl font-bold text-white\">New Deal Entry</h1>\n                  <p className=\"text-gray-300 text-sm\">Create a new vehicle deal</p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-3\">\n              <button\n                onClick={() => handleSave(true)}\n                disabled={saving}\n                className=\"flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg border border-white/20 transition-colors disabled:opacity-50\"\n              >\n                {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <Save className=\"h-4 w-4 mr-2\" />}\n                Save Draft\n              </button>\n              \n              <button\n                onClick={() => handleSave(false)}\n                disabled={saving}\n                className=\"flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg shadow-lg transition-colors disabled:opacity-50\"\n              >\n                {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <CheckCircle className=\"h-4 w-4 mr-2\" />}\n                Create Deal\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"relative max-w-6xl mx-auto px-6 py-8\">\n        {/* Step Indicator */}\n        {renderStepIndicator()}\n\n        {/* Form Content */}\n        <div className=\"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-8\">\n          <div className=\"mb-6\">\n            <h2 className=\"text-2xl font-bold text-white mb-2\">\n              {steps[currentStep - 1]?.title}\n            </h2>\n            <p className=\"text-gray-300\">\n              {currentStep === 1 && 'Enter basic vehicle information and VIN details'}\n              {currentStep === 2 && 'Configure deal type, funding, and timeline'}\n              {currentStep === 3 && 'Set pricing and financial terms'}\n              {currentStep === 4 && 'Add seller contact information'}\n              {currentStep === 5 && 'Document status and additional notes'}\n            </p>\n          </div>\n\n          {renderStep()}\n\n          {/* Navigation Buttons */}\n          <div className=\"flex items-center justify-between mt-8 pt-6 border-t border-white/10\">\n            <button\n              onClick={() => setCurrentStep(Math.max(1, currentStep - 1))}\n              disabled={currentStep === 1}\n              className=\"flex items-center px-4 py-2 text-gray-400 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Previous\n            </button>\n\n            <div className=\"flex items-center space-x-3\">\n              {currentStep === 5 && formData.vehicleDescription && (\n                <button\n                  onClick={handleEmailToListingTeam}\n                  className=\"flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors\"\n                >\n                  <Send className=\"h-4 w-4 mr-2\" />\n                  Email to Listing Team\n                </button>\n              )}\n              \n              {currentStep < 5 ? (\n                <button\n                  onClick={() => setCurrentStep(Math.min(5, currentStep + 1))}\n                  className=\"flex items-center px-6 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white rounded-lg transition-colors\"\n                >\n                  Next\n                  <ArrowLeft className=\"h-4 w-4 ml-2 rotate-180\" />\n                </button>\n              ) : (\n                <button\n                  onClick={() => handleSave(false)}\n                  disabled={saving}\n                  className=\"flex items-center px-6 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-lg transition-colors disabled:opacity-50\"\n                >\n                  {saving ? <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" /> : <CheckCircle className=\"h-4 w-4 mr-2\" />}\n                  Complete Deal\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* VIN Decode Status */}\n        {vinDecoding && (\n          <div className=\"fixed bottom-6 right-6 bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\">\n            <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n            Decoding VIN...\n          </div>\n        )}\n        \n        {vinDecoded && (\n          <div className=\"fixed bottom-6 right-6 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center\">\n            <CheckCircle className=\"h-4 w-4 mr-2\" />\n            VIN decoded successfully!\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default NewDealEntry; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}