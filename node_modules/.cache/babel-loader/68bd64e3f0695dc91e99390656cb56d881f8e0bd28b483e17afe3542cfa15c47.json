{"ast":null,"code":"import API_CONFIG from'../config/api';class ApiService{constructor(){this.baseURL=API_CONFIG.BASE_URL;this.token=localStorage.getItem('authToken');}setToken(token){this.token=token;if(token){localStorage.setItem('authToken',token);}else{localStorage.removeItem('authToken');}}async request(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const url=`${this.baseURL}${endpoint}`;const config={headers:{'Content-Type':'application/json',...(this.token&&{Authorization:`Bearer ${this.token}`}),...options.headers},...options};if(config.body&&typeof config.body==='object'){config.body=JSON.stringify(config.body);}console.log('API Request:',{url,method:config.method||'GET',headers:config.headers,body:config.body});try{const response=await fetch(url,config);console.log('API Response status:',response.status);const data=await response.json();console.log('API Response data:',data);if(!response.ok){throw new Error(data.error||data.message||`HTTP error! status: ${response.status}`);}return data;}catch(error){console.error('API request failed:',error);console.error('Request details:',{url,config});throw error;}}// Authentication methods\nasync login(credentials){const response=await this.request(API_CONFIG.ENDPOINTS.LOGIN,{method:'POST',body:credentials});if(response.token){this.setToken(response.token);}return response;}async logout(){try{await this.request(API_CONFIG.ENDPOINTS.LOGOUT,{method:'POST'});}catch(error){console.error('Logout error:',error);}finally{this.setToken(null);}}async getCurrentUser(){return this.request(API_CONFIG.ENDPOINTS.USERS+'/me');}// Deal management methods\nasync decodeVIN(vin){return this.request(API_CONFIG.ENDPOINTS.DECODE_VIN,{method:'POST',body:{vin}});}async searchDealers(query){return this.request(`${API_CONFIG.ENDPOINTS.SEARCH_DEALERS}?q=${encodeURIComponent(query)}`);}async createDeal(dealData){return this.request(API_CONFIG.ENDPOINTS.DEALS,{method:'POST',body:dealData});}async getDeals(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const queryParams=new URLSearchParams(filters).toString();return this.request(`${API_CONFIG.ENDPOINTS.DEALS}${queryParams?`?${queryParams}`:''}`);}async updateDeal(dealId,dealData){return this.request(`${API_CONFIG.ENDPOINTS.DEALS}/${dealId}`,{method:'PUT',body:dealData});}async deleteDeal(dealId){return this.request(`${API_CONFIG.ENDPOINTS.DEALS}/${dealId}`,{method:'DELETE'});}// Dealer management methods\nasync getDealers(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const queryParams=new URLSearchParams(filters).toString();return this.request(`/dealers${queryParams?`?${queryParams}`:''}`);}async createDealer(dealerData){return this.request('/dealers',{method:'POST',body:dealerData});}async updateDealer(dealerId,dealerData){return this.request(`/dealers/${dealerId}`,{method:'PUT',body:dealerData});}async deleteDealer(dealerId){return this.request(`/dealers/${dealerId}`,{method:'DELETE'});}}export default new ApiService();","map":{"version":3,"names":["API_CONFIG","ApiService","constructor","baseURL","BASE_URL","token","localStorage","getItem","setToken","setItem","removeItem","request","endpoint","options","arguments","length","undefined","url","config","headers","Authorization","body","JSON","stringify","console","log","method","response","fetch","status","data","json","ok","Error","error","message","login","credentials","ENDPOINTS","LOGIN","logout","LOGOUT","getCurrentUser","USERS","decodeVIN","vin","DECODE_VIN","searchDealers","query","SEARCH_DEALERS","encodeURIComponent","createDeal","dealData","DEALS","getDeals","filters","queryParams","URLSearchParams","toString","updateDeal","dealId","deleteDeal","getDealers","createDealer","dealerData","updateDealer","dealerId","deleteDealer"],"sources":["/Users/bsauer02/Desktop/Opis3.0/rp-exotics-frontend/src/services/api.js"],"sourcesContent":["import API_CONFIG from '../config/api';\n\nclass ApiService {\n  constructor() {\n    this.baseURL = API_CONFIG.BASE_URL;\n    this.token = localStorage.getItem('authToken');\n  }\n\n  setToken(token) {\n    this.token = token;\n    if (token) {\n      localStorage.setItem('authToken', token);\n    } else {\n      localStorage.removeItem('authToken');\n    }\n  }\n\n  async request(endpoint, options = {}) {\n    const url = `${this.baseURL}${endpoint}`;\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        ...(this.token && { Authorization: `Bearer ${this.token}` }),\n        ...options.headers,\n      },\n      ...options,\n    };\n\n    if (config.body && typeof config.body === 'object') {\n      config.body = JSON.stringify(config.body);\n    }\n\n    console.log('API Request:', {\n      url,\n      method: config.method || 'GET',\n      headers: config.headers,\n      body: config.body\n    });\n\n    try {\n      const response = await fetch(url, config);\n      console.log('API Response status:', response.status);\n      \n      const data = await response.json();\n      console.log('API Response data:', data);\n\n      if (!response.ok) {\n        throw new Error(data.error || data.message || `HTTP error! status: ${response.status}`);\n      }\n\n      return data;\n    } catch (error) {\n      console.error('API request failed:', error);\n      console.error('Request details:', { url, config });\n      throw error;\n    }\n  }\n\n  // Authentication methods\n  async login(credentials) {\n    const response = await this.request(API_CONFIG.ENDPOINTS.LOGIN, {\n      method: 'POST',\n      body: credentials\n    });\n    \n    if (response.token) {\n      this.setToken(response.token);\n    }\n    \n    return response;\n  }\n\n  async logout() {\n    try {\n      await this.request(API_CONFIG.ENDPOINTS.LOGOUT, {\n        method: 'POST'\n      });\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      this.setToken(null);\n    }\n  }\n\n  async getCurrentUser() {\n    return this.request(API_CONFIG.ENDPOINTS.USERS + '/me');\n  }\n\n  // Deal management methods\n  async decodeVIN(vin) {\n    return this.request(API_CONFIG.ENDPOINTS.DECODE_VIN, {\n      method: 'POST',\n      body: { vin }\n    });\n  }\n\n  async searchDealers(query) {\n    return this.request(`${API_CONFIG.ENDPOINTS.SEARCH_DEALERS}?q=${encodeURIComponent(query)}`);\n  }\n\n  async createDeal(dealData) {\n    return this.request(API_CONFIG.ENDPOINTS.DEALS, {\n      method: 'POST',\n      body: dealData\n    });\n  }\n\n  async getDeals(filters = {}) {\n    const queryParams = new URLSearchParams(filters).toString();\n    return this.request(`${API_CONFIG.ENDPOINTS.DEALS}${queryParams ? `?${queryParams}` : ''}`);\n  }\n\n  async updateDeal(dealId, dealData) {\n    return this.request(`${API_CONFIG.ENDPOINTS.DEALS}/${dealId}`, {\n      method: 'PUT',\n      body: dealData\n    });\n  }\n\n  async deleteDeal(dealId) {\n    return this.request(`${API_CONFIG.ENDPOINTS.DEALS}/${dealId}`, {\n      method: 'DELETE'\n    });\n  }\n\n  // Dealer management methods\n  async getDealers(filters = {}) {\n    const queryParams = new URLSearchParams(filters).toString();\n    return this.request(`/dealers${queryParams ? `?${queryParams}` : ''}`);\n  }\n\n  async createDealer(dealerData) {\n    return this.request('/dealers', {\n      method: 'POST',\n      body: dealerData\n    });\n  }\n\n  async updateDealer(dealerId, dealerData) {\n    return this.request(`/dealers/${dealerId}`, {\n      method: 'PUT',\n      body: dealerData\n    });\n  }\n\n  async deleteDealer(dealerId) {\n    return this.request(`/dealers/${dealerId}`, {\n      method: 'DELETE'\n    });\n  }\n}\n\nexport default new ApiService(); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}