{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{ArrowLeft,FileText,CheckCircle,Clock,AlertTriangle,Car,Upload,Download,Edit,Eye,Filter,Search,Plus,Calendar,DollarSign,User,Building2,MapPin,Phone,Mail,Paperclip,Shield,AlertCircle,ChevronRight,MoreVertical}from'lucide-react';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BackOfficeDeals=()=>{var _currentUser$profile,_selectedDeal$seller,_selectedDeal$seller2,_selectedDeal$purchas;const navigate=useNavigate();const[currentUser,setCurrentUser]=useState(null);const[deals,setDeals]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedDeal,setSelectedDeal]=useState(null);const[searchQuery,setSearchQuery]=useState('');const[statusFilter,setStatusFilter]=useState('');const[priorityFilter,setPriorityFilter]=useState('');// Document types that need tracking\nconst documentTypes=[{id:'title',name:'Title',required:true,icon:FileText},{id:'contract',name:'Purchase Contract',required:true,icon:FileText},{id:'driversLicense',name:'Driver\\'s License',required:true,icon:Shield},{id:'odometer',name:'Odometer Statement',required:true,icon:Car},{id:'dealerLicense',name:'Dealer License',required:false,icon:Building2},{id:'paymentProof',name:'Payment Verification',required:true,icon:DollarSign},{id:'inspection',name:'Vehicle Inspection',required:false,icon:CheckCircle},{id:'insurance',name:'Insurance Documents',required:false,icon:Shield}];// Deal workflow stages\nconst workflowStages=[{id:'documentation',name:'Documentation Collection',color:'orange'},{id:'verification',name:'Document Verification',color:'blue'},{id:'processing',name:'Title Processing',color:'purple'},{id:'completion',name:'Deal Completion',color:'green'}];const permissions={admin:{canAccessBackOffice:true,canEditDeals:true,canViewFinancials:true,canManageDocuments:true,canApproveDocuments:true},sales:{canAccessBackOffice:false,canEditDeals:true,canViewFinancials:false,canManageDocuments:false,canApproveDocuments:false},finance:{canAccessBackOffice:true,canEditDeals:true,canViewFinancials:true,canManageDocuments:true,canApproveDocuments:true},viewer:{canAccessBackOffice:false,canEditDeals:false,canViewFinancials:false,canManageDocuments:false,canApproveDocuments:false}};const userPermissions=currentUser?permissions[currentUser.role]:null;// Load current user and deals from database\nuseEffect(()=>{const loadData=async()=>{try{setLoading(true);// Load current user\nconst userResponse=await api.get('/api/users/me');setCurrentUser(userResponse.data);// Load deals from back office API\nconst dealsResponse=await api.getBackOfficeDeals();setDeals(dealsResponse.data||[]);setLoading(false);}catch(err){console.error('Failed to load data:',err);setError('Failed to load deals');setLoading(false);}};loadData();},[]);// Filter deals based on search and filters\nconst filteredDeals=deals.filter(deal=>{var _deal$vehicle,_deal$stockNumber,_deal$seller,_deal$seller$name;const matchesSearch=((_deal$vehicle=deal.vehicle)===null||_deal$vehicle===void 0?void 0:_deal$vehicle.toLowerCase().includes(searchQuery.toLowerCase()))||((_deal$stockNumber=deal.stockNumber)===null||_deal$stockNumber===void 0?void 0:_deal$stockNumber.toLowerCase().includes(searchQuery.toLowerCase()))||((_deal$seller=deal.seller)===null||_deal$seller===void 0?void 0:(_deal$seller$name=_deal$seller.name)===null||_deal$seller$name===void 0?void 0:_deal$seller$name.toLowerCase().includes(searchQuery.toLowerCase()));const matchesStatus=!statusFilter||deal.currentStage===statusFilter;const matchesPriority=!priorityFilter||deal.priority===priorityFilter;return matchesSearch&&matchesStatus&&matchesPriority;});const getStageColor=stage=>{const stageObj=workflowStages.find(s=>s.id===stage);return stageObj?stageObj.color:'gray';};const getDocumentStatus=(documents,docType)=>{const doc=documents===null||documents===void 0?void 0:documents.find(d=>d.type===docType);if(!doc)return'missing';if(doc.approved)return'approved';if(doc.uploaded)return'pending';return'missing';};const getDocumentStatusColor=status=>{switch(status){case'approved':return'text-green-400';case'pending':return'text-yellow-400';case'missing':return'text-red-400';default:return'text-gray-400';}};const getDocumentStatusIcon=status=>{switch(status){case'approved':return CheckCircle;case'pending':return Clock;case'missing':return AlertTriangle;default:return AlertCircle;}};const getPriorityColor=priority=>{switch(priority){case'high':return'bg-red-500/20 text-red-400';case'medium':return'bg-yellow-500/20 text-yellow-400';case'low':return'bg-green-500/20 text-green-400';default:return'bg-gray-500/20 text-gray-400';}};const calculateProgress=documents=>{if(!documents)return 0;const requiredDocs=documentTypes.filter(dt=>dt.required);const completedDocs=requiredDocs.filter(dt=>{const doc=documents.find(d=>d.type===dt.id);return doc&&doc.approved;});return Math.round(completedDocs.length/requiredDocs.length*100);};const updateDocumentStatus=async(dealId,docType,status)=>{try{if(status==='approved'){await api.approveDocument(dealId,docType,true);}else if(status==='pending'){// Mark as received (uploaded but not approved)\nawait api.approveDocument(dealId,docType,false);}// Reload deals to get updated data\nconst dealsResponse=await api.getBackOfficeDeals();setDeals(dealsResponse.data||[]);}catch(err){console.error('Failed to update document status:',err);}};if(!currentUser||!(userPermissions!==null&&userPermissions!==void 0&&userPermissions.canAccessBackOffice)){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Shield,{className:\"h-16 w-16 text-red-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white mb-2\",children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 mb-6\",children:\"You don't have permission to access the Back Office.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-xl text-white font-medium hover:scale-105 transition-transform duration-200\",children:\"Go Back\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 overflow-hidden pointer-events-none\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse delay-1000\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-orange-500/3 rounded-full blur-3xl animate-pulse delay-2000\"})]}),/*#__PURE__*/_jsx(\"header\",{className:\"relative bg-black/20 backdrop-blur-md border-b border-white/10 sticky top-0 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"mr-4 p-2 rounded-lg bg-white/10 border border-white/20 hover:bg-white/20 transition-colors duration-200\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-5 w-5 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-3 mr-4\",children:/*#__PURE__*/_jsx(FileText,{className:\"h-6 w-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-white\",children:\"Back Office Operations\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 text-sm\",children:\"Documentation & Compliance Tracking\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-white\",children:((_currentUser$profile=currentUser.profile)===null||_currentUser$profile===void 0?void 0:_currentUser$profile.displayName)||currentUser.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400\",children:currentUser.role})]})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative max-w-7xl mx-auto px-6 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by vehicle, stock number, or seller...\",className:\"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500\",value:statusFilter,onChange:e=>setStatusFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Stages\"}),workflowStages.map(stage=>/*#__PURE__*/_jsx(\"option\",{value:stage.id,children:stage.name},stage.id))]}),/*#__PURE__*/_jsxs(\"select\",{className:\"bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500\",value:priorityFilter,onChange:e=>setPriorityFilter(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Priorities\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",children:\"High Priority\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium Priority\"}),/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low Priority\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 text-sm\",children:loading?'Loading deals...':`Showing ${filteredDeals.length} of ${deals.length} deals`}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:\"Total pending tasks:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"bg-orange-500/20 text-orange-400 text-xs font-medium px-2 py-1 rounded-full\",children:\"6\"})]})]})]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-20\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300\",children:\"Loading deals...\"})]})}):error?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-20\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"h-12 w-12 text-red-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-400 mb-2\",children:\"Error loading deals\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"mt-4 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors\",children:\"Retry\"})]})}):filteredDeals.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-20\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(FileText,{className:\"h-12 w-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-300 mb-2\",children:deals.length===0?'No deals found':'No deals match your search criteria'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:deals.length===0?'Deals will appear here once they enter the documentation phase':'Try adjusting your search or filters'})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:filteredDeals.map(deal=>{var _deal$seller2,_deal$seller3,_deal$purchasePrice,_workflowStages$find,_deal$assignedTo,_deal$assignedTo$prof;return/*#__PURE__*/_jsxs(\"div\",{className:\"group bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-6 hover:bg-white/10 hover:border-white/20 transition-all duration-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-white\",children:deal.vehicle}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-400 text-sm\",children:[\"Stock #\",deal.stockNumber]}),/*#__PURE__*/_jsxs(\"span\",{className:`px-3 py-1 rounded-full text-xs font-medium ${getPriorityColor(deal.priority)}`,children:[deal.priority,\" priority\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-6 text-sm text-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(User,{className:\"h-4 w-4 mr-2\"}),((_deal$seller2=deal.seller)===null||_deal$seller2===void 0?void 0:_deal$seller2.name)||((_deal$seller3=deal.seller)===null||_deal$seller3===void 0?void 0:_deal$seller3.company)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"h-4 w-4 mr-2\"}),new Date(deal.purchaseDate).toLocaleDateString()]}),userPermissions.canViewFinancials&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DollarSign,{className:\"h-4 w-4 mr-2\"}),\"$\",(_deal$purchasePrice=deal.purchasePrice)===null||_deal$purchasePrice===void 0?void 0:_deal$purchasePrice.toLocaleString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:`px-4 py-2 rounded-xl text-sm font-medium bg-${getStageColor(deal.currentStage)}-500/20 text-${getStageColor(deal.currentStage)}-400`,children:(_workflowStages$find=workflowStages.find(s=>s.id===deal.currentStage))===null||_workflowStages$find===void 0?void 0:_workflowStages$find.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedDeal(deal),className:\"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors\",children:/*#__PURE__*/_jsx(MoreVertical,{className:\"h-5 w-5 text-gray-400\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 text-sm\",children:\"Documentation Progress\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-white text-sm font-medium\",children:[calculateProgress(deal.documents),\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-700 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:`bg-gradient-to-r from-${getStageColor(deal.currentStage)}-500 to-${getStageColor(deal.currentStage)}-400 h-2 rounded-full transition-all duration-500`,style:{width:`${calculateProgress(deal.documents)}%`}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4\",children:documentTypes.filter(dt=>dt.required).map(docType=>{const status=getDocumentStatus(deal.documents,docType.id);const StatusIcon=getDocumentStatusIcon(status);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/5 rounded-xl p-4 border border-white/10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(docType.icon,{className:\"h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsx(StatusIcon,{className:`h-4 w-4 ${getDocumentStatusColor(status)}`})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-white text-sm font-medium mb-1\",children:docType.name}),/*#__PURE__*/_jsx(\"p\",{className:`text-xs ${getDocumentStatusColor(status)} capitalize`,children:status==='missing'?'Not Received':status}),userPermissions.canManageDocuments&&status!=='approved'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex space-x-1\",children:[status==='missing'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateDocumentStatus(deal.id,docType.id,'pending'),className:\"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded hover:bg-blue-500/30 transition-colors\",children:\"Mark Received\"}),status==='pending'&&userPermissions.canApproveDocuments&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateDocumentStatus(deal.id,docType.id,'approved'),className:\"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded hover:bg-green-500/30 transition-colors\",children:\"Approve\"})]})]},docType.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setSelectedDeal(deal),className:\"flex items-center px-4 py-2 bg-purple-500/20 text-purple-400 rounded-lg hover:bg-purple-500/30 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4 mr-2\"}),\"View Details\"]}),userPermissions.canEditDeals&&/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center px-4 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors text-sm\",children:[/*#__PURE__*/_jsx(Edit,{className:\"h-4 w-4 mr-2\"}),\"Edit Deal\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 text-xs text-gray-400\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Last updated: \",new Date(deal.updatedAt).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2022\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Assigned to: \",((_deal$assignedTo=deal.assignedTo)===null||_deal$assignedTo===void 0?void 0:(_deal$assignedTo$prof=_deal$assignedTo.profile)===null||_deal$assignedTo$prof===void 0?void 0:_deal$assignedTo$prof.displayName)||'Unassigned']})]})]})]},deal.id);})}),selectedDeal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-900/95 backdrop-blur-lg rounded-3xl border border-white/20 p-8 max-w-6xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-white\",children:[selectedDeal.vehicle,\" - Documentation\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedDeal(null),className:\"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-5 w-5 text-white\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/5 rounded-2xl p-6 border border-white/10 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-white mb-4\",children:\"Deal Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:\"Vehicle\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white\",children:selectedDeal.vehicle})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:\"Stock Number\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white\",children:selectedDeal.stockNumber})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:\"VIN\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white font-mono text-sm\",children:selectedDeal.vin})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:\"Seller\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white\",children:((_selectedDeal$seller=selectedDeal.seller)===null||_selectedDeal$seller===void 0?void 0:_selectedDeal$seller.name)||((_selectedDeal$seller2=selectedDeal.seller)===null||_selectedDeal$seller2===void 0?void 0:_selectedDeal$seller2.company)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:\"Purchase Date\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white\",children:new Date(selectedDeal.purchaseDate).toLocaleDateString()})]}),userPermissions.canViewFinancials&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:\"Purchase Price\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-green-400 font-medium\",children:[\"$\",(_selectedDeal$purchas=selectedDeal.purchasePrice)===null||_selectedDeal$purchas===void 0?void 0:_selectedDeal$purchas.toLocaleString()]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/5 rounded-2xl p-6 border border-white/10\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-white mb-4\",children:\"Workflow Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:workflowStages.map((stage,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:`w-4 h-4 rounded-full ${selectedDeal.currentStage===stage.id?`bg-${stage.color}-500`:index<workflowStages.findIndex(s=>s.id===selectedDeal.currentStage)?`bg-${stage.color}-500`:'bg-gray-600'}`}),/*#__PURE__*/_jsx(\"span\",{className:`text-sm ${selectedDeal.currentStage===stage.id?`text-${stage.color}-400`:'text-gray-400'}`,children:stage.name})]},stage.id))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/5 rounded-2xl p-6 border border-white/10\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-white mb-6\",children:\"Document Checklist\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:documentTypes.map(docType=>{const status=getDocumentStatus(selectedDeal.documents,docType.id);const StatusIcon=getDocumentStatusIcon(status);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(docType.icon,{className:\"h-6 w-6 text-gray-400\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-white font-medium\",children:docType.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:docType.required?'Required':'Optional'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(StatusIcon,{className:`h-5 w-5 ${getDocumentStatusColor(status)}`}),/*#__PURE__*/_jsx(\"span\",{className:`text-sm ${getDocumentStatusColor(status)} capitalize`,children:status==='missing'?'Not Received':status})]}),userPermissions.canManageDocuments&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[status==='missing'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors\",children:/*#__PURE__*/_jsx(Upload,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateDocumentStatus(selectedDeal.id,docType.id,'pending'),className:\"px-3 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors text-xs\",children:\"Mark Received\"})]}),status==='pending'&&userPermissions.canApproveDocuments&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateDocumentStatus(selectedDeal.id,docType.id,'approved'),className:\"px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors text-xs\",children:\"Approve\"}),status==='approved'&&/*#__PURE__*/_jsx(\"button\",{className:\"p-2 bg-gray-500/20 text-gray-400 rounded-lg hover:bg-gray-500/30 transition-colors\",children:/*#__PURE__*/_jsx(Download,{className:\"h-4 w-4\"})})]})]})]},docType.id);})})]})})]})]})})]})]});};export default BackOfficeDeals;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","ArrowLeft","FileText","CheckCircle","Clock","AlertTriangle","Car","Upload","Download","Edit","Eye","Filter","Search","Plus","Calendar","DollarSign","User","Building2","MapPin","Phone","Mail","Paperclip","Shield","AlertCircle","ChevronRight","MoreVertical","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BackOfficeDeals","_currentUser$profile","_selectedDeal$seller","_selectedDeal$seller2","_selectedDeal$purchas","navigate","currentUser","setCurrentUser","deals","setDeals","loading","setLoading","error","setError","selectedDeal","setSelectedDeal","searchQuery","setSearchQuery","statusFilter","setStatusFilter","priorityFilter","setPriorityFilter","documentTypes","id","name","required","icon","workflowStages","color","permissions","admin","canAccessBackOffice","canEditDeals","canViewFinancials","canManageDocuments","canApproveDocuments","sales","finance","viewer","userPermissions","role","loadData","userResponse","get","data","dealsResponse","getBackOfficeDeals","err","console","filteredDeals","filter","deal","_deal$vehicle","_deal$stockNumber","_deal$seller","_deal$seller$name","matchesSearch","vehicle","toLowerCase","includes","stockNumber","seller","matchesStatus","currentStage","matchesPriority","priority","getStageColor","stage","stageObj","find","s","getDocumentStatus","documents","docType","doc","d","type","approved","uploaded","getDocumentStatusColor","status","getDocumentStatusIcon","getPriorityColor","calculateProgress","requiredDocs","dt","completedDocs","Math","round","length","updateDocumentStatus","dealId","approveDocument","className","children","onClick","profile","displayName","placeholder","value","onChange","e","target","map","window","location","reload","_deal$seller2","_deal$seller3","_deal$purchasePrice","_workflowStages$find","_deal$assignedTo","_deal$assignedTo$prof","company","Date","purchaseDate","toLocaleDateString","purchasePrice","toLocaleString","style","width","StatusIcon","updatedAt","assignedTo","vin","index","findIndex"],"sources":["/Users/bsauer02/Desktop/Opis3.0/rp-exotics-frontend-only/src/components/BackOfficeDeals.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ArrowLeft, FileText, CheckCircle, Clock, AlertTriangle, Car, Upload, Download, Edit, Eye, Filter, Search, Plus, Calendar, DollarSign, User, Building2, MapPin, Phone, Mail, Paperclip, Shield, AlertCircle, ChevronRight, MoreVertical } from 'lucide-react';\nimport api from '../services/api';\n\nconst BackOfficeDeals = () => {\n  const navigate = useNavigate();\n  \n  const [currentUser, setCurrentUser] = useState(null);\n\n  const [deals, setDeals] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedDeal, setSelectedDeal] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState('');\n  const [priorityFilter, setPriorityFilter] = useState('');\n\n  // Document types that need tracking\n  const documentTypes = [\n    { id: 'title', name: 'Title', required: true, icon: FileText },\n    { id: 'contract', name: 'Purchase Contract', required: true, icon: FileText },\n    { id: 'driversLicense', name: 'Driver\\'s License', required: true, icon: Shield },\n    { id: 'odometer', name: 'Odometer Statement', required: true, icon: Car },\n    { id: 'dealerLicense', name: 'Dealer License', required: false, icon: Building2 },\n    { id: 'paymentProof', name: 'Payment Verification', required: true, icon: DollarSign },\n    { id: 'inspection', name: 'Vehicle Inspection', required: false, icon: CheckCircle },\n    { id: 'insurance', name: 'Insurance Documents', required: false, icon: Shield }\n  ];\n\n  // Deal workflow stages\n  const workflowStages = [\n    { id: 'documentation', name: 'Documentation Collection', color: 'orange' },\n    { id: 'verification', name: 'Document Verification', color: 'blue' },\n    { id: 'processing', name: 'Title Processing', color: 'purple' },\n    { id: 'completion', name: 'Deal Completion', color: 'green' }\n  ];\n\n  const permissions = {\n    admin: {\n      canAccessBackOffice: true,\n      canEditDeals: true,\n      canViewFinancials: true,\n      canManageDocuments: true,\n      canApproveDocuments: true\n    },\n    sales: {\n      canAccessBackOffice: false,\n      canEditDeals: true,\n      canViewFinancials: false,\n      canManageDocuments: false,\n      canApproveDocuments: false\n    },\n    finance: {\n      canAccessBackOffice: true,\n      canEditDeals: true,\n      canViewFinancials: true,\n      canManageDocuments: true,\n      canApproveDocuments: true\n    },\n    viewer: {\n      canAccessBackOffice: false,\n      canEditDeals: false,\n      canViewFinancials: false,\n      canManageDocuments: false,\n      canApproveDocuments: false\n    }\n  };\n\n  const userPermissions = currentUser ? permissions[currentUser.role] : null;\n\n  // Load current user and deals from database\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        setLoading(true);\n        \n        // Load current user\n        const userResponse = await api.get('/api/users/me');\n        setCurrentUser(userResponse.data);\n        \n        // Load deals from back office API\n        const dealsResponse = await api.getBackOfficeDeals();\n        setDeals(dealsResponse.data || []);\n        \n        setLoading(false);\n      } catch (err) {\n        console.error('Failed to load data:', err);\n        setError('Failed to load deals');\n        setLoading(false);\n      }\n    };\n    \n    loadData();\n  }, []);\n\n  // Filter deals based on search and filters\n  const filteredDeals = deals.filter(deal => {\n    const matchesSearch = deal.vehicle?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         deal.stockNumber?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         deal.seller?.name?.toLowerCase().includes(searchQuery.toLowerCase());\n    \n    const matchesStatus = !statusFilter || deal.currentStage === statusFilter;\n    const matchesPriority = !priorityFilter || deal.priority === priorityFilter;\n    \n    return matchesSearch && matchesStatus && matchesPriority;\n  });\n\n  const getStageColor = (stage) => {\n    const stageObj = workflowStages.find(s => s.id === stage);\n    return stageObj ? stageObj.color : 'gray';\n  };\n\n  const getDocumentStatus = (documents, docType) => {\n    const doc = documents?.find(d => d.type === docType);\n    if (!doc) return 'missing';\n    if (doc.approved) return 'approved';\n    if (doc.uploaded) return 'pending';\n    return 'missing';\n  };\n\n  const getDocumentStatusColor = (status) => {\n    switch (status) {\n      case 'approved': return 'text-green-400';\n      case 'pending': return 'text-yellow-400';\n      case 'missing': return 'text-red-400';\n      default: return 'text-gray-400';\n    }\n  };\n\n  const getDocumentStatusIcon = (status) => {\n    switch (status) {\n      case 'approved': return CheckCircle;\n      case 'pending': return Clock;\n      case 'missing': return AlertTriangle;\n      default: return AlertCircle;\n    }\n  };\n\n  const getPriorityColor = (priority) => {\n    switch (priority) {\n      case 'high': return 'bg-red-500/20 text-red-400';\n      case 'medium': return 'bg-yellow-500/20 text-yellow-400';\n      case 'low': return 'bg-green-500/20 text-green-400';\n      default: return 'bg-gray-500/20 text-gray-400';\n    }\n  };\n\n  const calculateProgress = (documents) => {\n    if (!documents) return 0;\n    const requiredDocs = documentTypes.filter(dt => dt.required);\n    const completedDocs = requiredDocs.filter(dt => {\n      const doc = documents.find(d => d.type === dt.id);\n      return doc && doc.approved;\n    });\n    return Math.round((completedDocs.length / requiredDocs.length) * 100);\n  };\n\n  const updateDocumentStatus = async (dealId, docType, status) => {\n    try {\n      if (status === 'approved') {\n        await api.approveDocument(dealId, docType, true);\n      } else if (status === 'pending') {\n        // Mark as received (uploaded but not approved)\n        await api.approveDocument(dealId, docType, false);\n      }\n      \n      // Reload deals to get updated data\n      const dealsResponse = await api.getBackOfficeDeals();\n      setDeals(dealsResponse.data || []);\n    } catch (err) {\n      console.error('Failed to update document status:', err);\n    }\n  };\n\n  if (!currentUser || !userPermissions?.canAccessBackOffice) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black flex items-center justify-center\">\n        <div className=\"text-center\">\n          <Shield className=\"h-16 w-16 text-red-400 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Access Denied</h2>\n          <p className=\"text-gray-400 mb-6\">You don't have permission to access the Back Office.</p>\n          <button \n            onClick={() => navigate('/')}\n            className=\"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-xl text-white font-medium hover:scale-105 transition-transform duration-200\"\n          >\n            Go Back\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black\">\n      {/* Animated Background Elements */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-purple-500/5 rounded-full blur-3xl animate-pulse\"></div>\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-blue-500/5 rounded-full blur-3xl animate-pulse delay-1000\"></div>\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-orange-500/3 rounded-full blur-3xl animate-pulse delay-2000\"></div>\n      </div>\n\n      {/* Header */}\n      <header className=\"relative bg-black/20 backdrop-blur-md border-b border-white/10 sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <button \n                onClick={() => navigate('/')}\n                className=\"mr-4 p-2 rounded-lg bg-white/10 border border-white/20 hover:bg-white/20 transition-colors duration-200\"\n              >\n                <ArrowLeft className=\"h-5 w-5 text-white\" />\n              </button>\n              <div className=\"flex items-center\">\n                <div className=\"bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-3 mr-4\">\n                  <FileText className=\"h-6 w-6 text-white\" />\n                </div>\n                <div>\n                  <h1 className=\"text-xl font-bold text-white\">Back Office Operations</h1>\n                  <p className=\"text-gray-300 text-sm\">Documentation & Compliance Tracking</p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-4\">\n              <div className=\"text-right\">\n                <p className=\"text-sm font-medium text-white\">{currentUser.profile?.displayName || currentUser.name}</p>\n                <p className=\"text-xs text-gray-400\">{currentUser.role}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"relative max-w-7xl mx-auto px-6 py-8\">\n        {/* Search and Filters */}\n        <div className=\"mb-8\">\n          <div className=\"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-6\">\n            <div className=\"flex items-center space-x-4 mb-4\">\n              <div className=\"flex-1 relative\">\n                <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search by vehicle, stock number, or seller...\"\n                  className=\"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                />\n              </div>\n              <select \n                className=\"bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                value={statusFilter}\n                onChange={(e) => setStatusFilter(e.target.value)}\n              >\n                <option value=\"\">All Stages</option>\n                {workflowStages.map(stage => (\n                  <option key={stage.id} value={stage.id}>{stage.name}</option>\n                ))}\n              </select>\n              <select \n                className=\"bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                value={priorityFilter}\n                onChange={(e) => setPriorityFilter(e.target.value)}\n              >\n                <option value=\"\">All Priorities</option>\n                <option value=\"high\">High Priority</option>\n                <option value=\"medium\">Medium Priority</option>\n                <option value=\"low\">Low Priority</option>\n              </select>\n            </div>\n            \n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-gray-300 text-sm\">\n                {loading ? 'Loading deals...' : `Showing ${filteredDeals.length} of ${deals.length} deals`}\n              </p>\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"text-xs text-gray-400\">Total pending tasks:</span>\n                <span className=\"bg-orange-500/20 text-orange-400 text-xs font-medium px-2 py-1 rounded-full\">\n                  6\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Deals List */}\n        {loading ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4\"></div>\n              <p className=\"text-gray-300\">Loading deals...</p>\n            </div>\n          </div>\n        ) : error ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <div className=\"text-center\">\n              <AlertCircle className=\"h-12 w-12 text-red-400 mx-auto mb-4\" />\n              <p className=\"text-red-400 mb-2\">Error loading deals</p>\n              <p className=\"text-gray-400 text-sm\">{error}</p>\n              <button \n                onClick={() => window.location.reload()} \n                className=\"mt-4 px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors\"\n              >\n                Retry\n              </button>\n            </div>\n          </div>\n        ) : filteredDeals.length === 0 ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <div className=\"text-center\">\n              <FileText className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n              <p className=\"text-gray-300 mb-2\">\n                {deals.length === 0 ? 'No deals found' : 'No deals match your search criteria'}\n              </p>\n              <p className=\"text-gray-400 text-sm\">\n                {deals.length === 0 \n                  ? 'Deals will appear here once they enter the documentation phase'\n                  : 'Try adjusting your search or filters'\n                }\n              </p>\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {filteredDeals.map((deal) => (\n              <div key={deal.id} className=\"group bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-6 hover:bg-white/10 hover:border-white/20 transition-all duration-300\">\n                {/* Deal Header */}\n                <div className=\"flex items-start justify-between mb-6\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-4 mb-2\">\n                      <h3 className=\"text-xl font-bold text-white\">{deal.vehicle}</h3>\n                      <span className=\"text-gray-400 text-sm\">Stock #{deal.stockNumber}</span>\n                      <span className={`px-3 py-1 rounded-full text-xs font-medium ${getPriorityColor(deal.priority)}`}>\n                        {deal.priority} priority\n                      </span>\n                    </div>\n                    <div className=\"flex items-center space-x-6 text-sm text-gray-300\">\n                      <div className=\"flex items-center\">\n                        <User className=\"h-4 w-4 mr-2\" />\n                        {deal.seller?.name || deal.seller?.company}\n                      </div>\n                      <div className=\"flex items-center\">\n                        <Calendar className=\"h-4 w-4 mr-2\" />\n                        {new Date(deal.purchaseDate).toLocaleDateString()}\n                      </div>\n                      {userPermissions.canViewFinancials && (\n                        <div className=\"flex items-center\">\n                          <DollarSign className=\"h-4 w-4 mr-2\" />\n                          ${deal.purchasePrice?.toLocaleString()}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-4\">\n                    <div className={`px-4 py-2 rounded-xl text-sm font-medium bg-${getStageColor(deal.currentStage)}-500/20 text-${getStageColor(deal.currentStage)}-400`}>\n                      {workflowStages.find(s => s.id === deal.currentStage)?.name}\n                    </div>\n                    <button \n                      onClick={() => setSelectedDeal(deal)}\n                      className=\"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors\"\n                    >\n                      <MoreVertical className=\"h-5 w-5 text-gray-400\" />\n                    </button>\n                  </div>\n                </div>\n\n                {/* Progress Bar */}\n                <div className=\"mb-6\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"text-gray-400 text-sm\">Documentation Progress</span>\n                    <span className=\"text-white text-sm font-medium\">{calculateProgress(deal.documents)}%</span>\n                  </div>\n                  <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                    <div \n                      className={`bg-gradient-to-r from-${getStageColor(deal.currentStage)}-500 to-${getStageColor(deal.currentStage)}-400 h-2 rounded-full transition-all duration-500`}\n                      style={{ width: `${calculateProgress(deal.documents)}%` }}\n                    ></div>\n                  </div>\n                </div>\n\n                {/* Document Status Grid */}\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  {documentTypes.filter(dt => dt.required).map((docType) => {\n                    const status = getDocumentStatus(deal.documents, docType.id);\n                    const StatusIcon = getDocumentStatusIcon(status);\n                    \n                    return (\n                      <div key={docType.id} className=\"bg-white/5 rounded-xl p-4 border border-white/10\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <docType.icon className=\"h-5 w-5 text-gray-400\" />\n                          <StatusIcon className={`h-4 w-4 ${getDocumentStatusColor(status)}`} />\n                        </div>\n                        <h4 className=\"text-white text-sm font-medium mb-1\">{docType.name}</h4>\n                        <p className={`text-xs ${getDocumentStatusColor(status)} capitalize`}>\n                          {status === 'missing' ? 'Not Received' : status}\n                        </p>\n                        {userPermissions.canManageDocuments && status !== 'approved' && (\n                          <div className=\"mt-2 flex space-x-1\">\n                            {status === 'missing' && (\n                              <button \n                                onClick={() => updateDocumentStatus(deal.id, docType.id, 'pending')}\n                                className=\"text-xs bg-blue-500/20 text-blue-400 px-2 py-1 rounded hover:bg-blue-500/30 transition-colors\"\n                              >\n                                Mark Received\n                              </button>\n                            )}\n                            {status === 'pending' && userPermissions.canApproveDocuments && (\n                              <button \n                                onClick={() => updateDocumentStatus(deal.id, docType.id, 'approved')}\n                                className=\"text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded hover:bg-green-500/30 transition-colors\"\n                              >\n                                Approve\n                              </button>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    );\n                  })}\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"mt-6 flex items-center justify-between\">\n                  <div className=\"flex space-x-3\">\n                    <button \n                      onClick={() => setSelectedDeal(deal)}\n                      className=\"flex items-center px-4 py-2 bg-purple-500/20 text-purple-400 rounded-lg hover:bg-purple-500/30 transition-colors text-sm\"\n                    >\n                      <Eye className=\"h-4 w-4 mr-2\" />\n                      View Details\n                    </button>\n                    {userPermissions.canEditDeals && (\n                      <button className=\"flex items-center px-4 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors text-sm\">\n                        <Edit className=\"h-4 w-4 mr-2\" />\n                        Edit Deal\n                      </button>\n                    )}\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-3 text-xs text-gray-400\">\n                    <span>Last updated: {new Date(deal.updatedAt).toLocaleDateString()}</span>\n                    <span>â€¢</span>\n                    <span>Assigned to: {deal.assignedTo?.profile?.displayName || 'Unassigned'}</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Deal Detail Modal */}\n        {selectedDeal && (\n          <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-gray-900/95 backdrop-blur-lg rounded-3xl border border-white/20 p-8 max-w-6xl w-full max-h-[90vh] overflow-y-auto\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-2xl font-bold text-white\">{selectedDeal.vehicle} - Documentation</h2>\n                <button \n                  onClick={() => setSelectedDeal(null)}\n                  className=\"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors\"\n                >\n                  <ArrowLeft className=\"h-5 w-5 text-white\" />\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                {/* Deal Information */}\n                <div className=\"lg:col-span-1\">\n                  <div className=\"bg-white/5 rounded-2xl p-6 border border-white/10 mb-6\">\n                    <h3 className=\"text-lg font-bold text-white mb-4\">Deal Information</h3>\n                    <div className=\"space-y-3\">\n                      <div>\n                        <p className=\"text-gray-400 text-sm\">Vehicle</p>\n                        <p className=\"text-white\">{selectedDeal.vehicle}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-400 text-sm\">Stock Number</p>\n                        <p className=\"text-white\">{selectedDeal.stockNumber}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-gray-400 text-sm\">VIN</p>\n                        <p className=\"text-white font-mono text-sm\">{selectedDeal.vin}</p>\n                      </div>\n                                              <div>\n                          <p className=\"text-gray-400 text-sm\">Seller</p>\n                          <p className=\"text-white\">{selectedDeal.seller?.name || selectedDeal.seller?.company}</p>\n                        </div>\n                                              <div>\n                          <p className=\"text-gray-400 text-sm\">Purchase Date</p>\n                          <p className=\"text-white\">{new Date(selectedDeal.purchaseDate).toLocaleDateString()}</p>\n                        </div>\n                                              {userPermissions.canViewFinancials && (\n                          <div>\n                            <p className=\"text-gray-400 text-sm\">Purchase Price</p>\n                            <p className=\"text-green-400 font-medium\">${selectedDeal.purchasePrice?.toLocaleString()}</p>\n                          </div>\n                        )}\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white/5 rounded-2xl p-6 border border-white/10\">\n                    <h3 className=\"text-lg font-bold text-white mb-4\">Workflow Status</h3>\n                    <div className=\"space-y-3\">\n                      {workflowStages.map((stage, index) => (\n                        <div key={stage.id} className=\"flex items-center space-x-3\">\n                          <div className={`w-4 h-4 rounded-full ${\n                            selectedDeal.currentStage === stage.id ? `bg-${stage.color}-500` :\n                            index < workflowStages.findIndex(s => s.id === selectedDeal.currentStage) ? `bg-${stage.color}-500` :\n                            'bg-gray-600'\n                          }`}></div>\n                          <span className={`text-sm ${\n                            selectedDeal.currentStage === stage.id ? `text-${stage.color}-400` : 'text-gray-400'\n                          }`}>\n                            {stage.name}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Document Checklist */}\n                <div className=\"lg:col-span-2\">\n                  <div className=\"bg-white/5 rounded-2xl p-6 border border-white/10\">\n                    <h3 className=\"text-lg font-bold text-white mb-6\">Document Checklist</h3>\n                    <div className=\"space-y-4\">\n                      {documentTypes.map((docType) => {\n                        const status = getDocumentStatus(selectedDeal.documents, docType.id);\n                        const StatusIcon = getDocumentStatusIcon(status);\n                        \n                        return (\n                          <div key={docType.id} className=\"flex items-center justify-between p-4 bg-white/5 rounded-xl border border-white/10\">\n                            <div className=\"flex items-center space-x-4\">\n                              <docType.icon className=\"h-6 w-6 text-gray-400\" />\n                              <div>\n                                <h4 className=\"text-white font-medium\">{docType.name}</h4>\n                                <p className=\"text-gray-400 text-sm\">\n                                  {docType.required ? 'Required' : 'Optional'}\n                                </p>\n                              </div>\n                            </div>\n                            \n                            <div className=\"flex items-center space-x-4\">\n                              <div className=\"flex items-center space-x-2\">\n                                <StatusIcon className={`h-5 w-5 ${getDocumentStatusColor(status)}`} />\n                                <span className={`text-sm ${getDocumentStatusColor(status)} capitalize`}>\n                                  {status === 'missing' ? 'Not Received' : status}\n                                </span>\n                              </div>\n                              \n                              {userPermissions.canManageDocuments && (\n                                <div className=\"flex space-x-2\">\n                                  {status === 'missing' && (\n                                    <>\n                                      <button className=\"p-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors\">\n                                        <Upload className=\"h-4 w-4\" />\n                                      </button>\n                                      <button \n                                        onClick={() => updateDocumentStatus(selectedDeal.id, docType.id, 'pending')}\n                                        className=\"px-3 py-2 bg-blue-500/20 text-blue-400 rounded-lg hover:bg-blue-500/30 transition-colors text-xs\"\n                                      >\n                                        Mark Received\n                                      </button>\n                                    </>\n                                  )}\n                                  {status === 'pending' && userPermissions.canApproveDocuments && (\n                                    <button \n                                      onClick={() => updateDocumentStatus(selectedDeal.id, docType.id, 'approved')}\n                                      className=\"px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors text-xs\"\n                                    >\n                                      Approve\n                                    </button>\n                                  )}\n                                  {status === 'approved' && (\n                                    <button className=\"p-2 bg-gray-500/20 text-gray-400 rounded-lg hover:bg-gray-500/30 transition-colors\">\n                                      <Download className=\"h-4 w-4\" />\n                                    </button>\n                                  )}\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default BackOfficeDeals; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}